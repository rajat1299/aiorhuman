{"ast":null,"code":"var _jsxFileName = \"/Users/rajattiwari/aiorhuman/client/src/components/game/ChatWindow.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useSocket } from '../../contexts/SocketContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatWindow = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const socket = useSocket();\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const formatMessage = (message, socketId) => {\n    return {\n      ...message,\n      messageId: message.id,\n      senderId: message.senderId,\n      userId: user === null || user === void 0 ? void 0 : user.id,\n      socketId,\n      isOwn: (user === null || user === void 0 ? void 0 : user.id) === message.senderId || message.senderId === socketId\n    };\n  };\n  useEffect(() => {\n    if (socket) {\n      socket.on('message', message => {\n        setMessages(prev => [...prev, message]);\n      });\n      return () => {\n        socket.off('message');\n      };\n    }\n  }, [socket]);\n  const sendMessage = e => {\n    e.preventDefault();\n    if (socket && inputMessage.trim()) {\n      socket.emit('send-message', inputMessage.trim());\n      setInputMessage('');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-[600px] bg-white rounded-lg shadow\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto p-4 space-y-4\",\n      children: messages.map(message => {\n        const formattedMessage = formatMessage(message, socket === null || socket === void 0 ? void 0 : socket.id);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex ${formattedMessage.isOwn ? 'justify-end' : 'justify-start'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `max-w-[70%] rounded-lg px-4 py-2 ${formattedMessage.isOwn ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-900'}`,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: formattedMessage.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this)\n        }, formattedMessage.messageId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      className: \"p-4 border-t\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: inputMessage,\n          onChange: e => setInputMessage(e.target.value),\n          placeholder: \"Type your message...\",\n          className: \"flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"2BzNs+qtkIK5ks6JRFFrL88n7jk=\", false, function () {\n  return [useAuth, useSocket];\n});\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useEffect","useState","useAuth","useSocket","jsxDEV","_jsxDEV","ChatWindow","_s","user","socket","messages","setMessages","inputMessage","setInputMessage","formatMessage","message","socketId","messageId","id","senderId","userId","isOwn","on","prev","off","sendMessage","e","preventDefault","trim","emit","className","children","map","formattedMessage","content","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["/Users/rajattiwari/aiorhuman/client/src/components/game/ChatWindow.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useSocket } from '../../contexts/SocketContext';\n\ninterface Message {\n  id: string;\n  content: string;\n  senderId: string;\n  timestamp: Date;\n}\n\ninterface ChatMessage extends Message {\n  messageId: string;\n  userId?: string;\n  socketId?: string;\n  isOwn: boolean;\n}\n\nconst ChatWindow: React.FC = () => {\n  const { user } = useAuth();\n  const socket = useSocket();\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [inputMessage, setInputMessage] = useState('');\n\n  const formatMessage = (message: Message, socketId?: string): ChatMessage => {\n    return {\n      ...message,\n      messageId: message.id,\n      senderId: message.senderId,\n      userId: user?.id,\n      socketId,\n      isOwn: user?.id === message.senderId || message.senderId === socketId\n    };\n  };\n\n  useEffect(() => {\n    if (socket) {\n      socket.on('message', (message: Message) => {\n        setMessages(prev => [...prev, message]);\n      });\n\n      return () => {\n        socket.off('message');\n      };\n    }\n  }, [socket]);\n\n  const sendMessage = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (socket && inputMessage.trim()) {\n      socket.emit('send-message', inputMessage.trim());\n      setInputMessage('');\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-[600px] bg-white rounded-lg shadow\">\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {messages.map((message) => {\n          const formattedMessage = formatMessage(message, socket?.id);\n          return (\n            <div\n              key={formattedMessage.messageId}\n              className={`flex ${formattedMessage.isOwn ? 'justify-end' : 'justify-start'}`}\n            >\n              <div\n                className={`max-w-[70%] rounded-lg px-4 py-2 ${\n                  formattedMessage.isOwn\n                    ? 'bg-blue-500 text-white'\n                    : 'bg-gray-100 text-gray-900'\n                }`}\n              >\n                <p>{formattedMessage.content}</p>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      <form onSubmit={sendMessage} className=\"p-4 border-t\">\n        <div className=\"flex space-x-2\">\n          <input\n            type=\"text\"\n            value={inputMessage}\n            onChange={(e) => setInputMessage(e.target.value)}\n            placeholder=\"Type your message...\"\n            className=\"flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n          <button\n            type=\"submit\"\n            className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            Send\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ChatWindow; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}